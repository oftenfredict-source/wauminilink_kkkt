<!DOCTYPE html>
<html>

<head>
    <title>Budget JS Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h1>Budget JavaScript Function Test</h1>

        <div class="alert alert-info" id="status">Waiting for tests...</div>

        <button type="button" class="btn btn-primary" onclick="viewBudget(this)" data-id="1" data-name="Test Budget"
            data-type="Injili" data-fy="2025" data-total="1,000,000" data-spent="500,000" data-remaining="500,000"
            data-utilization="50" data-status="Active" data-start="2025-01-01" data-end="2025-12-31"
            data-description="Test Description">
            Test View Button
        </button>

        <button type="button" class="btn btn-warning" onclick="editBudget(this)" data-id="1" data-name="Test Budget"
            data-type="injili" data-fy="2025" data-total="1000000" data-start="2025-01-01" data-end="2025-12-31"
            data-status="active" data-description="Test">
            Test Edit Button
        </button>

        <div id="test-results" class="mt-4">
            <h3>Console Tests:</h3>
            <pre id="console-output"></pre>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const output = document.getElementById('console-output');
        const status = document.getElementById('status');

        function log(msg) {
            output.textContent += msg + '\n';
            console.log(msg);
        }

        // Test 1: Check if window.viewBudget exists
        log('Test 1: typeof window.viewBudget = ' + typeof window.viewBudget);
        log('Test 2: typeof window.editBudget = ' + typeof window.editBudget);
        log('Test 3: typeof window.confirmDeleteBudget = ' + typeof window.confirmDeleteBudget);

        // Define the functions
        window.viewBudget = function (button) {
            log('✓ viewBudget called successfully!');
            status.className = 'alert alert-success';
            status.textContent = 'viewBudget function works!';
            alert('View Budget clicked! Data: ' + button.dataset.name);
        };

        window.editBudget = function (button) {
            log('✓ editBudget called successfully!');
            status.className = 'alert alert-success';
            status.textContent = 'editBudget function works!';
            alert('Edit Budget clicked! Data: ' + button.dataset.name);
        };

        window.confirmDeleteBudget = function (form, id) {
            log('✓ confirmDeleteBudget called successfully!');
            return false;
        };

        // Re-test after definition
        log('\nAfter definition:');
        log('Test 4: typeof window.viewBudget = ' + typeof window.viewBudget);
        log('Test 5: typeof window.editBudget = ' + typeof window.editBudget);
        log('Test 6: typeof window.confirmDeleteBudget = ' + typeof window.confirmDeleteBudget);

        log('\n✓ All functions defined! Click the buttons to test.');
        status.className = 'alert alert-success';
        status.textContent = 'All functions loaded! Click buttons to test.';
    </script>
</body>

</html>